# ArcSat - Instru√ß√µes para GitHub Copilot

## üìã Contexto do Projeto

**ArcSat** √© uma plataforma CRM corporativa desenvolvida pela **√Åvila Ops** com foco em automa√ß√£o, integra√ß√µes e intelig√™ncia para escalar opera√ß√µes empresariais.

### Stack Tecnol√≥gico

#### Frontend
- **Next.js 16.0.0** (React 19, App Router)
- **TypeScript 5.x** (strict mode)
- **Tailwind CSS 4** (design system customizado)
- **shadcn/ui** (componentes)
- **Azure Static Web Apps** (hospedagem)

#### Backend
- **Node.js 20 LTS**
- **Express 4.19.2**
- **TypeScript 5.5.4** (strict mode)
- **MongoDB Atlas** (database)
- **Mongoose 8.6.0** (ODM)

#### DevOps & Infraestrutura
- **GitHub Actions** (CI/CD)
- **Azure Static Web Apps** (frontend)
- **Azure Functions** (backend - planejado)
- **Cloudflare** (DNS, CDN, DDoS protection)
- **Application Insights** (monitoring)

### Design System (√Åvila Ops)

```typescript
const theme = {
  colors: {
    primary: '#0077FF',      // blue-spatial
    secondary: '#00E0FF',    // cyan-neon
    background: '#0B0F17',   // dark-blue-sidereal
    foreground: '#F5F9FF',   // ice-white
  },
  fonts: {
    heading: ['Poppins', 'Inter'],
    body: ['Roboto', 'Open Sans'],
  },
  style: 'glassmorphism + futuristic corporate'
}
```

---

## üéØ Diretrizes de Desenvolvimento

### 1. Padr√µes de C√≥digo

#### TypeScript
- **Sempre** usar strict mode
- **Sempre** definir tipos expl√≠citos (evitar `any`)
- Usar interfaces para objetos complexos
- Usar enums para valores fixos
- Preferir `const` sobre `let`

```typescript
// ‚úÖ BOM
interface User {
  id: string;
  name: string;
  email: string;
  role: UserRole;
}

enum UserRole {
  ADMIN = 'admin',
  USER = 'user',
  GUEST = 'guest'
}

// ‚ùå EVITAR
const user: any = { ... }
```

#### React/Next.js
- Usar **Server Components** por padr√£o
- Client Components apenas quando necess√°rio (`'use client'`)
- Async components para data fetching
- Colocar l√≥gica de neg√≥cio no backend

```tsx
// ‚úÖ Server Component (padr√£o)
export default async function Page() {
  const data = await fetchData()
  return <div>{data}</div>
}

// ‚úÖ Client Component (quando necess√°rio)
'use client'
export default function InteractiveButton() {
  const [count, setCount] = useState(0)
  return <button onClick={() => setCount(count + 1)}>{count}</button>
}
```

#### Estilo e UI
- **Tailwind CSS** para todos os estilos
- Usar classes do design system customizado
- Glassmorphism: `bg-white/[0.02] backdrop-blur-xl border border-white/10`
- Gradientes espaciais: `from-[#0077FF] to-[#00E0FF]`

### 2. Estrutura de Arquivos

```
ArcSat/
‚îú‚îÄ‚îÄ frontend/arcsat-landing/
‚îÇ   ‚îú‚îÄ‚îÄ app/                    # Next.js App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx         # Root layout
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx           # Home page
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ globals.css        # Global styles
‚îÇ   ‚îú‚îÄ‚îÄ components/            # React components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Hero.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Features.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Infrastructure.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Footer.tsx
‚îÇ   ‚îú‚îÄ‚îÄ public/                # Static assets
‚îÇ   ‚îî‚îÄ‚îÄ tailwind.config.ts     # Tailwind configuration
‚îú‚îÄ‚îÄ src/                       # Backend source
‚îÇ   ‚îú‚îÄ‚îÄ config/               # Configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ env.ts           # Environment variables
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.ts      # MongoDB connection
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.ts        # Winston logger
‚îÇ   ‚îú‚îÄ‚îÄ models/              # Mongoose models
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ User.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Company.ts
‚îÇ   ‚îú‚îÄ‚îÄ routes/              # Express routes
‚îÇ   ‚îú‚îÄ‚îÄ middleware/          # Express middleware
‚îÇ   ‚îú‚îÄ‚îÄ types/               # TypeScript types
‚îÇ   ‚îî‚îÄ‚îÄ utils/               # Utility functions
‚îú‚îÄ‚îÄ docs/                     # Documentation
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md
‚îÇ   ‚îî‚îÄ‚îÄ ROADMAP.md
‚îî‚îÄ‚îÄ .github/
    ‚îú‚îÄ‚îÄ workflows/           # GitHub Actions
    ‚îî‚îÄ‚îÄ copilot-instructions.md
```

### 3. Padr√µes de Commit

Seguir [Conventional Commits](https://www.conventionalcommits.org/):

```
feat: adicionar nova funcionalidade
fix: corrigir bug
docs: atualizar documenta√ß√£o
style: formata√ß√£o, ponto e v√≠rgula, etc
refactor: refatora√ß√£o de c√≥digo
test: adicionar testes
chore: atualizar depend√™ncias, config
perf: melhorias de performance
ci: mudan√ßas no CI/CD
```

**Exemplos:**
```bash
git commit -m "feat: adicionar componente Hero com anima√ß√µes"
git commit -m "fix: corrigir erro de tipo no User model"
git commit -m "docs: atualizar roadmap com novas features"
```

---

## üöÄ Tarefas Priorit√°rias

### ‚ö†Ô∏è URGENTE - Configura√ß√£o CI/CD

**Status:** üî¥ BLOQUEADO - Workflows falhando

**Problema:** Secret `AZURE_STATIC_WEB_APPS_API_TOKEN` n√£o configurado

**A√ß√£o Requerida:**
1. Abrir: https://github.com/avilaops/ArcSat/settings/secrets/actions
2. Clicar em "New repository secret"
3. Nome: `AZURE_STATIC_WEB_APPS_API_TOKEN`
4. Valor: Est√° salvo em `AZURE_TOKEN.txt` (raiz do projeto)
5. Clicar "Add secret"

**Depois de configurar:**
```bash
# Re-executar o √∫ltimo workflow
gh workflow run "ArcSat CI/CD" --ref main
```

---

### üìù Fase 1: Backend TypeScript (EM ANDAMENTO)

#### ‚úÖ Conclu√≠do
- [x] Configura√ß√£o TypeScript (tsconfig.json)
- [x] Estrutura de pastas
- [x] Sistema de logging (Winston)
- [x] Conex√£o MongoDB (singleton)
- [x] Tipos e interfaces (src/types/index.ts)
- [x] Configura√ß√£o de ambiente (src/config/env.ts)
- [x] Modelo User (com erros - precisa corre√ß√£o)

#### üîÑ Em Progresso
- [ ] **Corrigir erros TypeScript no User.ts**
  - Problema: `bcrypt` default import
  - Problema: Tipos do Mongoose Schema
  - Solu√ß√£o: Usar `import * as bcrypt from 'bcrypt'`

- [ ] **Criar Company.ts model**
  ```typescript
  interface ICompany {
    id: string;
    cnpj: string;
    razaoSocial: string;
    nomeFantasia: string;
    email: string;
    telefone: string;
    endereco: IEndereco;
    subscriptionPlan: SubscriptionPlan;
    subscriptionStatus: SubscriptionStatus;
    createdAt: Date;
    updatedAt: Date;
  }
  ```

- [ ] **Implementar autentica√ß√£o JWT**
  - Criar `src/middleware/auth.ts`
  - Criar `src/routes/auth.ts`
  - Endpoints: `/auth/register`, `/auth/login`, `/auth/refresh`

#### üìã Backlog
- [ ] Valida√ß√£o com Zod
- [ ] Rate limiting por IP
- [ ] Integra√ß√£o ReceitaWS (valida√ß√£o CNPJ)
- [ ] Testes unit√°rios (Jest)
- [ ] API documentation (Swagger/OpenAPI)

---

### üé® Fase 2: Landing Page Premium (CONCLU√çDO ‚úÖ)

#### Status
- ‚úÖ Hero component com anima√ß√µes
- ‚úÖ Features component (6 cards)
- ‚úÖ Infrastructure component (tech stack)
- ‚úÖ Footer component completo
- ‚úÖ Tailwind config customizado
- ‚úÖ Build de produ√ß√£o funcionando
- üîÑ Deploy pendente (aguardando secret)

#### Ajustes Pendentes
- [ ] Adicionar links reais nos CTAs
- [ ] Criar p√°ginas internas (sobre, contato, etc)
- [ ] Implementar newsletter subscription
- [ ] Adicionar Google Analytics
- [ ] Testes de performance (Lighthouse > 95)

---

### üîê Fase 3: Autentica√ß√£o & Autoriza√ß√£o (PLANEJADO)

- [ ] Integra√ß√£o NextAuth.js
- [ ] Login social (Google, Microsoft)
- [ ] MFA (two-factor authentication)
- [ ] RBAC (Role-Based Access Control)
- [ ] Session management
- [ ] Password reset flow

---

### üìä Fase 4: Dashboard & CRUD (PLANEJADO)

- [ ] Layout do dashboard
- [ ] CRUD de empresas
- [ ] CRUD de contatos
- [ ] CRUD de intera√ß√µes
- [ ] Pipeline de vendas (Kanban)
- [ ] Filtros e busca avan√ßada

---

## üõ†Ô∏è Comandos √öteis

### Frontend
```bash
cd frontend/arcsat-landing
npm install              # Instalar depend√™ncias
npm run dev             # Dev server (http://localhost:3000)
npm run build           # Build de produ√ß√£o
npm run lint            # Lint com ESLint
```

### Backend
```bash
npm install              # Instalar depend√™ncias
npm run dev             # Dev server com tsx watch
npm run build           # Compilar TypeScript
npm run test            # Executar testes
npm run lint            # Lint com ESLint
```

### Git
```bash
git status              # Ver mudan√ßas
git add .               # Adicionar tudo
git commit -m "feat: ..." # Commit com mensagem
git push origin main    # Push para GitHub
```

### Azure CLI
```bash
az login                                    # Login no Azure
az staticwebapp list                       # Listar Static Web Apps
az staticwebapp secrets list --name <name> # Obter deployment token
```

---

## üêõ Debugging

### Frontend
1. Abrir DevTools (F12)
2. Verificar Console para erros
3. Network tab para requisi√ß√µes
4. React DevTools para componentes

### Backend
1. Verificar logs no terminal
2. Usar `console.log()` estrategicamente
3. Debugger do VS Code (F5)
4. MongoDB Compass para verificar dados

### CI/CD
1. GitHub Actions: https://github.com/avilaops/ArcSat/actions
2. Verificar logs de cada step
3. Re-executar workflows com `gh workflow run`
4. Secrets: https://github.com/avilaops/ArcSat/settings/secrets

---

## üìö Recursos

### Documenta√ß√£o Oficial
- Next.js: https://nextjs.org/docs
- TypeScript: https://www.typescriptlang.org/docs
- Tailwind CSS: https://tailwindcss.com/docs
- MongoDB: https://www.mongodb.com/docs
- Azure Static Web Apps: https://learn.microsoft.com/azure/static-web-apps

### Design System
- √Åvila Ops: Design futurista corporativo
- Cores: `#0077FF`, `#00E0FF`, `#0B0F17`, `#F5F9FF`
- Estilo: Glassmorphism + gradientes espaciais
- Tipografia: Poppins/Inter (headings), Roboto/Open Sans (body)

### Refer√™ncias
- ARCHITECTURE.md: Arquitetura completa do sistema
- ROADMAP.md: Roadmap de 12 semanas
- package.json: Scripts e depend√™ncias

---

## ‚úÖ Checklist de Qualidade

Antes de commitar c√≥digo:

- [ ] TypeScript compila sem erros (`npm run build`)
- [ ] ESLint passou sem warnings (`npm run lint`)
- [ ] C√≥digo segue padr√µes do projeto
- [ ] Commit message segue Conventional Commits
- [ ] Testado localmente
- [ ] Documenta√ß√£o atualizada (se necess√°rio)
- [ ] Secrets n√£o commitados no c√≥digo

---

## üö® Seguran√ßa

### Nunca Commitar:
- ‚ùå API keys
- ‚ùå Tokens de acesso
- ‚ùå Senhas
- ‚ùå Connection strings com credenciais
- ‚ùå Certificates/chaves privadas

### Usar Sempre:
- ‚úÖ Environment variables (`.env`)
- ‚úÖ GitHub Secrets
- ‚úÖ Azure Key Vault
- ‚úÖ `.gitignore` apropriado

---

## üìû Suporte

- **GitHub Issues**: https://github.com/avilaops/ArcSat/issues
- **Documenta√ß√£o**: `/docs` folder
- **√Åvila Ops**: https://avilaops.com

---

**√öltima atualiza√ß√£o:** 24/10/2025
**Vers√£o:** 1.0.0
**Mantenedor:** √Åvila Ops Team
