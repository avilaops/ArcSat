---
name: Backend - Create Company Model
about: Implementar modelo Mongoose para empresas/clientes corporativos
title: '‚ú® Feature: Criar modelo Company.ts'
labels: 'backend, feature, database'
assignees: ''
---

## üéØ Objetivo

Criar modelo Mongoose completo para gest√£o de empresas/clientes corporativos (B2B).

## üìã Requisitos

### Interface TypeScript

```typescript
interface ICompany {
  id: string;
  cnpj: string; // √önico, validado
  razaoSocial: string;
  nomeFantasia: string;
  email: string;
  telefone: string;
  endereco: {
    cep: string;
    logradouro: string;
    numero: string;
    complemento?: string;
    bairro: string;
    cidade: string;
    estado: string;
  };
  subscriptionPlan: SubscriptionPlan; // BASIC | PRO | ENTERPRISE
  subscriptionStatus: SubscriptionStatus; // ACTIVE | SUSPENDED | CANCELLED
  paymentMethod?: string;
  billingDay?: number; // 1-28
  createdAt: Date;
  updatedAt: Date;
}
```

### Valida√ß√µes

- [x] CNPJ: 14 d√≠gitos, formato v√°lido
- [x] Email: formato v√°lido
- [x] Telefone: formato v√°lido (DDD + n√∫mero)
- [x] CEP: 8 d√≠gitos

### M√©todos

```typescript
// M√©todo est√°tico
CompanyModel.findByCNPJ(cnpj: string): Promise<ICompany | null>

// M√©todo de inst√¢ncia
company.toPublicJSON(): object // Remove campos sens√≠veis
```

### Indexes

- CNPJ (√∫nico)
- Email (√∫nico)
- subscriptionStatus + createdAt (para queries)

## üìÅ Localiza√ß√£o

`src/models/Company.ts`

## ‚úÖ Crit√©rio de Aceita√ß√£o

- [ ] Interface `ICompany` definida em `src/types/index.ts`
- [ ] Schema Mongoose implementado
- [ ] Valida√ß√µes implementadas (CNPJ, email, telefone)
- [ ] M√©todo `findByCNPJ` implementado
- [ ] M√©todo `toPublicJSON` implementado
- [ ] Indexes criados
- [ ] TypeScript compila sem erros
- [ ] Testes unit√°rios (opcional)

## üîó Refer√™ncias

- [Mongoose Schema Types](https://mongoosejs.com/docs/schematypes.html)
- [Mongoose Validation](https://mongoosejs.com/docs/validation.html)
- [Valida√ß√£o CNPJ](https://www.npmjs.com/package/cnpj)

## ‚è±Ô∏è Prioridade

**MEDIUM** - Necess√°rio para CRUD de empresas.
