# ‚úÖ Azure Deployment Checklist

Use este checklist para garantir que todos os passos necess√°rios sejam completados antes e ap√≥s o deployment no Azure.

## üìã Pr√©-Deployment

### Configura√ß√£o Local
- [ ] Azure CLI instalado e configurado
- [ ] Login realizado: `az login`
- [ ] Subscription correto selecionado: `az account set --subscription <id>`
- [ ] Permiss√µes adequadas na subscription
- [ ] Node.js 18+ instalado localmente
- [ ] Git configurado corretamente

### Secrets e Configura√ß√µes
- [ ] MongoDB Atlas account criado
- [ ] Connection string do MongoDB obtida
- [ ] JWT secret gerado (min 32 caracteres)
- [ ] Email/SMTP configurado (se aplic√°vel)
- [ ] Dom√≠nios personalizados registrados (se aplic√°vel)

### C√≥digo
- [ ] Todas as mudan√ßas commitadas
- [ ] Branch sincronizada com remote
- [ ] Testes locais executados com sucesso
- [ ] Linter executado sem erros
- [ ] Vari√°veis de ambiente validadas localmente

## üöÄ Durante o Deployment

### Infraestrutura
- [ ] Resource Group criado no Azure
- [ ] Bicep template validado
- [ ] Par√¢metros revisados no arquivo .parameters.json
- [ ] Deploy do template executado com sucesso
- [ ] Outputs do deployment salvos

### Key Vault
- [ ] Key Vault criado
- [ ] Secret `mongodb-uri` adicionado
- [ ] Secret `jwt-secret` adicionado
- [ ] Secret `applicationinsights-connection` adicionado
- [ ] Permiss√µes concedidas ao App Service (Managed Identity)

### App Service (API)
- [ ] Web App criado
- [ ] Runtime Node.js 18 configurado
- [ ] Always On habilitado
- [ ] Health check path configurado (`/health`)
- [ ] Application Insights conectado
- [ ] Vari√°veis de ambiente configuradas
- [ ] CORS_ORIGINS configurado para produ√ß√£o
- [ ] C√≥digo deployado com sucesso

### Static Web App (Frontend)
- [ ] Static Web App criado
- [ ] GitHub integration configurado
- [ ] Build settings corretos
- [ ] Output location: `.next`
- [ ] Deployment token obtido
- [ ] Primeiro deploy completado

### Application Insights
- [ ] Workspace criado
- [ ] Connection string obtida
- [ ] Configurado no App Service
- [ ] Telemetria aparecendo no portal

### MongoDB Atlas
- [ ] IP do Azure adicionado √† whitelist
- [ ] Connection string testada
- [ ] Usu√°rio com permiss√µes adequadas
- [ ] Database `arcsat` criado

## ‚úÖ P√≥s-Deployment

### Verifica√ß√£o B√°sica
- [ ] API responde: `curl https://<app-name>.azurewebsites.net/`
- [ ] Health check OK: `curl https://<app-name>.azurewebsites.net/health`
- [ ] Readiness check OK: `curl https://<app-name>.azurewebsites.net/api/health/ready`
- [ ] Frontend carrega corretamente
- [ ] Nenhum erro 500 nos logs

### Testes Funcionais
- [ ] Registro de usu√°rio funciona
- [ ] Login funciona
- [ ] JWT tokens gerados corretamente
- [ ] Endpoints protegidos requerem autentica√ß√£o
- [ ] CORS funcionando para origens permitidas
- [ ] CORS bloqueando origens n√£o permitidas

### Monitoramento
- [ ] Application Insights recebendo dados
- [ ] Requests aparecendo no dashboard
- [ ] Exceptions sendo tracked (se houver)
- [ ] Custom events aparecendo
- [ ] Logs dispon√≠veis no portal

### Seguran√ßa
- [ ] HTTPS funcionando (certificate v√°lido)
- [ ] Security headers presentes nas respostas
- [ ] Secrets n√£o est√£o hardcoded no c√≥digo
- [ ] Key Vault sendo usado para secrets sens√≠veis
- [ ] CORS configurado adequadamente
- [ ] Rate limiting considerado (se necess√°rio)

### Performance
- [ ] Tempo de resposta aceit√°vel (< 1s)
- [ ] Cold start time aceit√°vel
- [ ] Always On habilitado (produ√ß√£o)
- [ ] Conex√µes ao MongoDB est√°veis
- [ ] Nenhum memory leak detectado

### GitHub Actions
- [ ] Secrets configurados no GitHub:
  - [ ] `AZURE_WEBAPP_PUBLISH_PROFILE_API`
  - [ ] `AZURE_STATIC_WEB_APPS_API_TOKEN`
- [ ] Workflow executa sem erros
- [ ] Deploy autom√°tico funciona no push para main
- [ ] Testes executam antes do deploy

### Dom√≠nios Personalizados (se aplic√°vel)
- [ ] DNS configurado corretamente
- [ ] Dom√≠nio customizado adicionado ao App Service
- [ ] Dom√≠nio customizado adicionado ao Static Web App
- [ ] Certificados SSL/TLS configurados
- [ ] Redirect HTTP ‚Üí HTTPS funciona

### Alertas e Notifica√ß√µes
- [ ] Alertas configurados para:
  - [ ] CPU > 80%
  - [ ] Mem√≥ria > 80%
  - [ ] Erros HTTP 5xx
  - [ ] Response time > 5s
  - [ ] Health check failures
- [ ] Notifica√ß√µes configuradas (email, SMS, etc.)
- [ ] Runbook documentado para alertas

## üìä Valida√ß√£o Final

### Checklist de Go-Live
- [ ] Todos os itens acima completados
- [ ] Stakeholders informados
- [ ] Documenta√ß√£o atualizada
- [ ] Backup strategy definida
- [ ] Disaster recovery plan documentado
- [ ] Monitoring dashboard configurado
- [ ] Logs sendo coletados adequadamente
- [ ] Performance baseline estabelecido

### Comunica√ß√£o
- [ ] Time t√©cnico notificado do go-live
- [ ] Usu√°rios informados (se aplic√°vel)
- [ ] URLs de produ√ß√£o documentadas
- [ ] Credenciais salvas em local seguro
- [ ] Runbook de opera√ß√µes criado

## üîÑ Manuten√ß√£o Cont√≠nua

### Semanal
- [ ] Revisar logs de erro no Application Insights
- [ ] Verificar alertas disparados
- [ ] Monitorar custos no Azure Portal
- [ ] Verificar performance metrics

### Mensal
- [ ] Revisar e otimizar queries lentas
- [ ] Atualizar depend√™ncias (security patches)
- [ ] Revisar e ajustar alertas
- [ ] Revisar custos e otimizar recursos

### Trimestral
- [ ] Disaster recovery drill
- [ ] Revisar e atualizar documenta√ß√£o
- [ ] Security audit
- [ ] Performance tuning baseado em m√©tricas

## üìû Contatos de Emerg√™ncia

**Suporte T√©cnico**
- Email: nicolas@avila.inc
- Documenta√ß√£o: https://docs.arcsat.com.br

**Azure Support**
- Portal: https://portal.azure.com
- Support tickets: Azure Portal > Help + support

**MongoDB Atlas Support**
- Portal: https://cloud.mongodb.com
- Support: Via portal da MongoDB

## üìö Recursos Adicionais

- [AZURE_DEPLOYMENT.md](./AZURE_DEPLOYMENT.md) - Guia completo de deployment
- [TROUBLESHOOTING.md](./TROUBLESHOOTING.md) - Solu√ß√£o de problemas
- [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - Comandos r√°pidos
- [IMPLEMENTATION_SUMMARY.md](./IMPLEMENTATION_SUMMARY.md) - Resumo da implementa√ß√£o

---

**Data**: _________  
**Respons√°vel**: _________  
**Ambiente**: ‚òê Dev  ‚òê Staging  ‚òê Production  
**Status**: ‚òê Em Progresso  ‚òê Completo  ‚òê Rollback Necess√°rio
