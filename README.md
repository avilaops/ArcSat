# üöÄ ArcSat CRM

Sistema de Gest√£o Empresarial completo com CRM, ERP e funcionalidades multi-tenant.

![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)
![MongoDB](https://img.shields.io/badge/MongoDB-Atlas-green.svg)
![Next.js](https://img.shields.io/badge/Next.js-16-black.svg)
![License](https://img.shields.io/badge/license-Private-red.svg)

> üéØ **Deploy R√°pido:** Novo no projeto? Comece aqui ‚Üí [üìã DEPLOY_INDEX.md](./DEPLOY_INDEX.md)

## üìö √çndice

- [Sobre o Projeto](#sobre-o-projeto)
- [Tecnologias](#tecnologias)
- [Estrutura do Projeto](#estrutura-do-projeto)
- [Pr√©-requisitos](#pr√©-requisitos)
- [Instala√ß√£o](#instala√ß√£o)
- [Configura√ß√£o](#configura√ß√£o)
- [Desenvolvimento](#desenvolvimento)
- [Deploy](#deploy)
- [API](#api)
- [Contribuindo](#contribuindo)

## üìñ Sobre o Projeto

**ArcSat CRM** √© uma plataforma SaaS multi-tenant de gest√£o empresarial que oferece:

- ‚úÖ **CRM** - Gest√£o de clientes e relacionamentos
- ‚úÖ **Gest√£o de Empresas** - Cadastro e controle de empresas
- ‚úÖ **Multi-tenant** - Isolamento de dados por empresa
- ‚úÖ **Autentica√ß√£o JWT** - Sistema seguro de autentica√ß√£o
- ‚úÖ **Integra√ß√£o CNPJ** - Consulta autom√°tica de dados empresariais
- ‚úÖ **API RESTful** - Arquitetura escal√°vel
- ‚úÖ **Dashboard Moderno** - Interface Next.js com React 19

## üõ† Tecnologias

### Backend
- **Node.js 18+** - Runtime JavaScript
- **Express.js** - Framework web
- **MongoDB Atlas** - Banco de dados NoSQL
- **Mongoose** - ODM para MongoDB
- **JWT** - Autentica√ß√£o
- **bcryptjs** - Criptografia de senhas

### Frontend
- **Next.js 16** - Framework React
- **React 19.2** - Biblioteca UI
- **TypeScript** - Tipagem est√°tica
- **Tailwind CSS 4** - Estiliza√ß√£o
- **Geist UI** - Componentes

### DevOps & Cloud
- **Azure** - Cloud hosting
- **Application Insights** - Monitoramento
- **GitHub Actions** - CI/CD
- **Docker** - Containeriza√ß√£o

## üìÅ Estrutura do Projeto

```
ArcSat/
‚îú‚îÄ‚îÄ src/                          # Backend (Node.js + Express)
‚îÇ   ‚îú‚îÄ‚îÄ config/                   # Configura√ß√µes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ monitoring.js         # Application Insights
‚îÇ   ‚îú‚îÄ‚îÄ middleware/               # Middlewares
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.js               # Autentica√ß√£o JWT
‚îÇ   ‚îú‚îÄ‚îÄ models/                   # Modelos MongoDB
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.js               # Modelo de usu√°rio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ company.js            # Modelo de empresa
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ customDomain.js       # Dom√≠nios customizados
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ webhook.js            # Webhooks
‚îÇ   ‚îú‚îÄ‚îÄ routes/                   # Rotas da API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.js               # Autentica√ß√£o
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cnpj.js               # Consulta CNPJ
‚îÇ   ‚îú‚îÄ‚îÄ utils/                    # Utilit√°rios
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ multiTenant.js        # L√≥gica multi-tenant
‚îÇ   ‚îú‚îÄ‚îÄ db.js                     # Conex√£o MongoDB
‚îÇ   ‚îî‚îÄ‚îÄ server.js                 # Servidor Express
‚îú‚îÄ‚îÄ frontend/                     # Frontend (Next.js)
‚îÇ   ‚îî‚îÄ‚îÄ arcsat-landing/
‚îÇ       ‚îú‚îÄ‚îÄ app/                  # App Router (Next.js 16)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx          # Landing page
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx        # Layout principal
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ crm/              # M√≥dulo CRM
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ dashboard/        # Dashboard
‚îÇ       ‚îú‚îÄ‚îÄ components/           # Componentes React
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Navbar.tsx
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ SystemsShowcase.tsx
‚îÇ       ‚îî‚îÄ‚îÄ public/               # Arquivos est√°ticos
‚îú‚îÄ‚îÄ docs/                         # Documenta√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ index.html                # P√°gina inicial docs
‚îÇ   ‚îú‚îÄ‚îÄ api/                      # Documenta√ß√£o API
‚îÇ   ‚îú‚îÄ‚îÄ guides/                   # Guias
‚îÇ   ‚îî‚îÄ‚îÄ infrastructure/           # Infraestrutura
‚îú‚îÄ‚îÄ scripts/                      # Scripts utilit√°rios
‚îú‚îÄ‚îÄ logs/                         # Logs da aplica√ß√£o
‚îú‚îÄ‚îÄ .env.example                  # Exemplo de vari√°veis
‚îú‚îÄ‚îÄ .gitignore                    # Arquivos ignorados
‚îî‚îÄ‚îÄ package.json                  # Depend√™ncias backend
```

## ‚öôÔ∏è Pr√©-requisitos

- **Node.js** >= 18.0.0
- **npm** >= 9.0.0
- **MongoDB Atlas** (conta gratuita ou paga)
- **Git**

## üöÄ Instala√ß√£o

### 1. Clone o reposit√≥rio

```bash
git clone https://github.com/avilaops/ArcSat.git
cd ArcSat
```

### 2. Instale as depend√™ncias do backend

```bash
npm install
```

### 3. Instale as depend√™ncias do frontend

```bash
cd frontend/arcsat-landing
npm install
cd ../..
```

## üîß Configura√ß√£o

### 1. Configure as vari√°veis de ambiente

Copie o arquivo de exemplo e configure:

```bash
cp .env.example .env
```

### 2. Edite o arquivo `.env`

```env
# MongoDB Atlas
MONGO_URI=mongodb+srv://usuario:senha@cluster.mongodb.net/arcsat?retryWrites=true&w=majority

# Servidor
PORT=5500
NODE_ENV=development

# JWT
JWT_SECRET=seu_segredo_super_secreto_min_32_caracteres

# URLs
FRONTEND_URL=http://localhost:3000
API_URL=http://localhost:5500

# Email (opcional)
EMAIL_HOST=smtp.porkbun.com
EMAIL_PORT=587
EMAIL_USER=seu-email@dominio.com
EMAIL_PASS=sua-senha

# Azure (produ√ß√£o)
APPLICATIONINSIGHTS_CONNECTION_STRING=
```

### 3. Configure o MongoDB Atlas

1. Acesse [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)
2. Crie um cluster gratuito
3. Configure o IP de acesso (0.0.0.0/0 para desenvolvimento)
4. Crie um usu√°rio de banco de dados
5. Copie a string de conex√£o para `MONGO_URI`

## üíª Desenvolvimento

### Backend (API)

```bash
# Desenvolvimento com hot-reload
npm run dev

# Produ√ß√£o
npm start

# Testes
npm test

# Linting
npm run lint

# Formata√ß√£o
npm run format
```

### Frontend (Next.js)

```bash
# Desenvolvimento
npm run frontend:dev

# Build de produ√ß√£o
npm run frontend:build

# Servir produ√ß√£o
cd frontend/arcsat-landing && npm start
```

### Documenta√ß√£o

```bash
# Servir documenta√ß√£o
npm run docs:serve
```

Acesse: http://localhost:3000

## üåê API

### Base URL

```
Development: http://localhost:5500/api/v1
Production: https://api.arcsat.com.br/api/v1
```

### Endpoints Principais

#### Autentica√ß√£o

```http
POST /api/v1/auth/register
POST /api/v1/auth/login
```

#### CNPJ

```http
GET /api/v1/cnpj/:cnpj
```

### Exemplo de Requisi√ß√£o

```javascript
// Login
const response = await fetch('http://localhost:5500/api/v1/auth/login', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    email: 'usuario@exemplo.com',
    password: 'senha123'
  })
});

const data = await response.json();
console.log(data.token); // JWT token
```

## üö¢ Deploy

### Azure App Service

#### Setup R√°pido (5 minutos):

üëâ **[Quick Start - Configurar GitHub Secrets](./QUICK_SECRETS_SETUP.md)**

#### Passos:

1. **Configure GitHub Secrets** - [Guia Completo](./GITHUB_SECRETS_SETUP.md)
   - `AZURE_CREDENTIALS` - Credenciais do Azure
   - `MONGO_ATLAS_URI` - Conex√£o MongoDB
   - `JWT_SECRET` - Chave JWT
   - `CLOUDFLARE_API_TOKEN` - Token Cloudflare
   
2. **Deploy autom√°tico via push para `main`**
   ```bash
   git push origin main
   ```

3. **Acompanhe o deploy:** https://github.com/avilaops/ArcSat/actions

üìö **Documenta√ß√£o Detalhada:**
- [Guia de Deploy Completo](./DEPLOY.md)
- [Setup R√°pido](./QUICK-DEPLOY.md)

### Vercel (Frontend)

```bash
cd frontend/arcsat-landing
vercel --prod
```

## üìä Monitoramento

O projeto utiliza **Azure Application Insights** para:

- Rastreamento de requisi√ß√µes
- M√©tricas de performance
- Logs de erro
- Telemetria customizada

## üß™ Testes

```bash
# Rodar todos os testes
npm test

# Testes com coverage
npm test -- --coverage

# Testes em watch mode
npm test -- --watch
```

## üìù Padr√µes de C√≥digo

- **ESLint** - Linting de JavaScript
- **Prettier** - Formata√ß√£o de c√≥digo
- **Commits sem√¢nticos** - Conventional Commits

### Exemplo de commit

```bash
git commit -m "feat: adiciona rota de consulta CNPJ"
git commit -m "fix: corrige valida√ß√£o de email"
git commit -m "docs: atualiza README"
```

## ü§ù Contribuindo

1. Fa√ßa um fork do projeto
2. Crie uma branch (`git checkout -b feature/nova-funcionalidade`)
3. Commit suas mudan√ßas (`git commit -m 'feat: adiciona nova funcionalidade'`)
4. Push para a branch (`git push origin feature/nova-funcionalidade`)
5. Abra um Pull Request

## üìÑ Licen√ßa

Este projeto √© **PRIVADO** e de propriedade da **√Åvila Inc**.

## üë• Autores

- **√Åvila Inc** - [nicolas@avila.inc](mailto:nicolas@avila.inc)

## üîó Links √öteis

### Documenta√ß√£o
- [Documenta√ß√£o Geral](./docs/index.html)
- [API Docs](./docs/api/)

### Deploy & CI/CD
- [‚ö° Quick Start - Secrets Setup](./QUICK_SECRETS_SETUP.md) - Setup em 5 minutos
- [üîê Guia Completo de Secrets](./GITHUB_SECRETS_SETUP.md) - Configura√ß√£o detalhada
- [üìã Checklist de Setup](./SETUP_CHECKLIST.md) - Checklist passo a passo
- [üîÑ Fluxo de Deploy](./DEPLOY_WORKFLOW.md) - Diagrama e explica√ß√£o
- [üöÄ Deploy Guide](./DEPLOY.md) - Guia de deploy completo
- [‚ö° Quick Deploy](./QUICK-DEPLOY.md) - Deploy r√°pido

### Links Externos
- [GitHub Repository](https://github.com/avilaops/ArcSat)
- [GitHub Actions](https://github.com/avilaops/ArcSat/actions)
- [Azure Portal](https://portal.azure.com)
- [MongoDB Atlas](https://cloud.mongodb.com)

---

**Desenvolvido com ‚ù§Ô∏è pela √Åvila Inc**
